// This is your Prisma schema file for PostgreSQL (Supabase)
// Copy this to schema.prisma when deploying to production

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model TrainingPlan {
  id          String   @id
  title       String
  subtitle    String?
  raceDate    String?
  startDate   String?
  endDate     String?
  description String?
  weeks       Json     // Complex nested structure for weeks and training days
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("training_plans")
}

model NutritionData {
  id           String   @id @default(cuid())
  dateKey      String   @unique // Date in YYYY-MM-DD format
  totalCalories Int?
  totalProtein Float?
  totalCarbs   Float?
  totalFats    Float?
  meals        Json     // Complex nested structure for meals and dishes
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("nutrition_data")
}

model GroceryList {
  id        String   @id @default(cuid())
  weekId    String   @unique // Format: W0, W1, W2, etc.
  categories Json    // Array of grocery categories with items
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("grocery_lists")
}
